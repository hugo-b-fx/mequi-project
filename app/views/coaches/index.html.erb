<%= render "shared/public_navbar" %>

<div class="coaches-index-page">
  <div class="search-hero">
    <div class="container">
      <h1 class="search-hero-title">Trouvez votre coach</h1>
      <p class="search-hero-subtitle">
        Parcourez des centaines de profils de coachs qualifiÃ©s
      </p>
    </div>
  </div>

  <div class="container py-4">
    <div class="row">
      <!-- FILTRES -->
      <div class="col-lg-3 mb-4">
        <%= render "coaches/search_filters" %>
      </div>

      <!-- RÃ‰SULTATS -->
      <div class="col-lg-9">
        <div class="search-results-header d-flex justify-content-between align-items-center mb-4">
          <div class="results-count">
            <strong><%= @coaches.total_count %></strong>
            coach<%= @coaches.total_count > 1 ? "s" : "" %>
            trouvÃ©<%= @coaches.total_count > 1 ? "s" : "" %>
          </div>
        </div>

        <% if @coaches.any? %>
          <div class="coaches-grid">
            <% @coaches.each do |coach| %>
              <%= render "coaches/coach_card", coach: coach %>
            <% end %>
          </div>

          <div class="pagination-wrapper mt-4">
            <%= paginate @coaches %>
          </div>
        <% else %>
          <div class="no-results">
            <div class="no-results-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
              </svg>
            </div>

            <h3>Aucun coach trouvÃ©</h3>
            <p>Essayez de modifier vos critÃ¨res de recherche</p>
            <%= link_to "Effacer les filtres", coaches_path, class: "btn btn-outline-brown" %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div data-controller="ai-chat">
  <!-- Bouton flottant -->
  <button
    type="button"
    class="ai-chat-button"
    data-action="click->ai-chat#toggle"
    aria-label="Assistant IA">
    ðŸ¤–
  </button>

  <!-- FenÃªtre chat -->
  <div class="ai-chat-box d-none" data-ai-chat-target="box">
    <div class="ai-chat-header">
      Assistant Mâ€™equi
    </div>

    <div
      id="messages"
      class="ai-chat-messages"
      data-ai-chat-target="messages">
      <div class="text-muted small mb-2">
        ðŸ‘‹ Bonjour !<br>
        DÃ©cris-moi le coach que tu recherches (discipline, ville, niveauâ€¦)
      </div>
    </div>

    <form data-action="submit->ai-chat#send">
      <input
        type="text"
        class="form-control"
        placeholder="Ex : coach dressage Ã  Versailles"
        data-ai-chat-target="input"
        required>
    </form>
  </div>
</div>
